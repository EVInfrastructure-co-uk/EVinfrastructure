<div style="margin: 20px 20px 20px 0;">
  <div class="tabs js-tabs" data-module="tabs">
    <div class="tabs__controls" role="tablist" aria-label="Section">

      <button id="tab-near-home" class="tabs__tab tabs__tab--active" role="tab"
              aria-selected="true" aria-controls="near-home" tabindex="0">
        Near home charging
      </button>

      <button id="tab-pavement-channels" class="tabs__tab" role="tab"
              aria-selected="false" aria-controls="pavement-channels" tabindex="-1">
        Pavement channels
      </button>

      <button id="tab-levi" class="tabs__tab" role="tab"
              aria-selected="false" aria-controls="levi" tabindex="-1">
        LEVI/EVIF/ULEVTF
      </button>
    </div>

    <div id="near-home" class="tabs__panel" role="tabpanel" aria-labelledby="tab-near-home">
      <h2>NEVIS Near Home Charging distribution metric</h2>

      <p>The below figures show the percentage of households without driveways which are within a 4-minute walk of public chargepoints.</p>

      {% include map-nearhome.html %}

      <p>This is a repeat of the map which is on the <a href="https://nevis.cenex.co.uk/metrics">National EV Insights and Supports website</a>.</p>
      <p>Data not available for Northern Ireland.</p>
    </div>

    <div id="pavement-channels" class="tabs__panel" role="tabpanel" aria-labelledby="tab-pavement-channels">
      <h2>Pavement Channels</h2>

      <p>See our <a href="/home-charging/pavement-channels">pavement channel</a> page for more information on charging at home without a driveway.</p>
      <!-- pavement map container -->
      {% include map-pavement.html %}

      <h3>The Pavement Channel Grant (England)</h3>
      <p>86 highway authorities are direct recipients of the Pavement Channel Grant, whereas 67 highway authorities (including the Isles of Scilly) sit under combined authorities to which the grant has been awarded.</p>
      <p>The Department for Transport publishes <a href="https://www.gov.uk/government/publications/electric-vehicle-ev-pavement-channels-grant-local-authority-allocations/electric-vehicle-ev-pavement-channels-grant-funding-amounts">information</a> about the Pavement Channel Grant and allocations.</p>
    </div>

    <div id="levi" class="tabs__panel" role="tabpanel" aria-labelledby="tab-levi">
      <h2>Local Electric Vehicle Infrastructure fund (LEVI, England),<br>Electric Vehicle Infrastructure Fund (EVIF, Scotland)<br>Ultra Low Emission Vehicle Transformation Fund (ULEVTF, Wales)</h2>

      <p>These government-funded schemes aim to produce a step change in public chargepoint provision. See our <a href="/government/funding-public-chargepoints">page</a> on public chargepoint programmes for more information.</p>
      <!-- LEVI map container -->
      {% include map-levi.html %}

      <p>There is no equivalent scheme in <a href="https://evinfrastructure.co.uk/government/ni#funding-public-chargepoints">Northern Ireland</a> although nine of the eleven councils are in a consortium.</p>    </div>
  </div>

  <!-- Small helper: when a hidden tab becomes visible, ensure the included maps resize correctly.
       The includes themselves initialise their maps and expose them as window.nearhomeMap / window.pavementMap / window.leviMap. -->
  <script>
    (function () {
      function hookTabInvalidate(tabId, mapVarName) {
        const btn = document.getElementById(tabId);
        if (!btn) return;
        btn.addEventListener('click', () => {
          setTimeout(() => {
            try {
              const m = window[mapVarName];
              if (m && typeof m.invalidateSize === 'function') m.invalidateSize();
            } catch (e) { /* ignore */ }
          }, 250);
        });
        // If the tab is already active on load, attempt an initial invalidate once maps may be ready.
        if (btn.classList.contains('tabs__tab--active') || btn.getAttribute('aria-selected') === 'true') {
          setTimeout(() => {
            try {
              const m = window[mapVarName];
              if (m && typeof m.invalidateSize === 'function') m.invalidateSize();
            } catch (e) { /* ignore */ }
          }, 500);
        }
      }

      hookTabInvalidate('tab-near-home', 'nearhomeMap');
      hookTabInvalidate('tab-pavement-channels', 'pavementMap');
      hookTabInvalidate('tab-levi', 'leviMap');
    })();
  </script>

  <script type="text/javascript" src="/js/tabs.js"></script>
</div>